<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VCAN: inc/vcan.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VCAN
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">Virtual CAN bus</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bfccd401955b95cf8c75461437045ac0.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vcan.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vcan.h:</div>
<div class="dyncontent">
<div class="center"><img src="vcan_8h__incl.png" border="0" usemap="#inc_2vcan_8h" alt=""/></div>
<map name="inc_2vcan_8h" id="inc_2vcan_8h">
<area shape="rect" title=" " alt="" coords="133,5,214,31"/>
<area shape="rect" title=" " alt="" coords="5,79,70,104"/>
<area shape="rect" title=" " alt="" coords="94,79,163,104"/>
<area shape="rect" title=" " alt="" coords="186,79,251,104"/>
<area shape="rect" title=" " alt="" coords="275,79,339,104"/>
</map>
</div>
</div>
<p><a href="vcan_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvcan__msg__t.html">vcan_msg_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message to transmit or receive.  <a href="structvcan__msg__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvcan__node.html">vcan_node</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual node.  <a href="structvcan__node.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvcan__bus__t.html">vcan_bus_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual bus.  <a href="structvcan__bus__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac6e927b13ef1da26b0eb81537c744150"><td class="memItemLeft" align="right" valign="top"><a id="ac6e927b13ef1da26b0eb81537c744150"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#ac6e927b13ef1da26b0eb81537c744150">VCAN_VERSION</a>&#160;&#160;&#160;&quot;2.0.0&quot;</td></tr>
<tr class="memdesc:ac6e927b13ef1da26b0eb81537c744150"><td class="mdescLeft">&#160;</td><td class="mdescRight">VCAN version using semantic versioning. <br /></td></tr>
<tr class="separator:ac6e927b13ef1da26b0eb81537c744150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd8162e1afa9bc243879ed83d273dd5"><td class="memItemLeft" align="right" valign="top"><a id="a7dd8162e1afa9bc243879ed83d273dd5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#a7dd8162e1afa9bc243879ed83d273dd5">VCAN_DATA_MAX_LEN</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:a7dd8162e1afa9bc243879ed83d273dd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max payload size of a CAN message in bytes. <br /></td></tr>
<tr class="separator:a7dd8162e1afa9bc243879ed83d273dd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf54a2e77853a0f4217d6bcd75ad902b"><td class="memItemLeft" align="right" valign="top"><a id="adf54a2e77853a0f4217d6bcd75ad902b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#adf54a2e77853a0f4217d6bcd75ad902b">VCAN_MAX_CONNECTED_NODES</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:adf54a2e77853a0f4217d6bcd75ad902b"><td class="mdescLeft">&#160;</td><td class="mdescRight">MAx amount of virtual nodes connected to the virtual bus. <br /></td></tr>
<tr class="separator:adf54a2e77853a0f4217d6bcd75ad902b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af85bcdc0f243aa23503829e24085ae5f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structvcan__node.html">vcan_node</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a></td></tr>
<tr class="memdesc:af85bcdc0f243aa23503829e24085ae5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual node.  <a href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">More...</a><br /></td></tr>
<tr class="separator:af85bcdc0f243aa23503829e24085ae5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af87bc0cb09ad0a7df2a44784afee21b0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a> { <br />
&#160;&#160;<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a1755e318ade1090d8ba3e28facae7cdf">VCAN_OK</a> = 0, 
<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a953804e5254c5caf6773412019acc948">VCAN_NULL_BUS</a> = 1, 
<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0ad5a9001be8d447b4cc3429582041d159">VCAN_NULL_MSG</a> = 2, 
<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a05807aa29d7bd5ba51cbecddf0a2f26c">VCAN_NULL_NODE</a> = 3, 
<br />
&#160;&#160;<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a11920683d62df5617e40dd46524a0371">VCAN_NULL_CALLBACK</a> = 4, 
<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a83ff0bbbf8be6890bc3394d519e62d2b">VCAN_TOO_MANY_CONNECTED</a> = 5, 
<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0af5319daa4b25064119d93ee1bcca539d">VCAN_NODE_NOT_FOUND</a> = 6, 
<a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0ad9de5f55040e5502b215dc6904f29a73">VCAN_ALREADY_CONNECTED</a> = 7
<br />
 }</td></tr>
<tr class="memdesc:af87bc0cb09ad0a7df2a44784afee21b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">VCAN error codes.  <a href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">More...</a><br /></td></tr>
<tr class="separator:af87bc0cb09ad0a7df2a44784afee21b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad559e0d0143cb9a666b605bb5c8ed0b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#ad559e0d0143cb9a666b605bb5c8ed0b5">vcan_init</a> (<a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *bus)</td></tr>
<tr class="memdesc:ad559e0d0143cb9a666b605bb5c8ed0b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the bus.  <a href="vcan_8h.html#ad559e0d0143cb9a666b605bb5c8ed0b5">More...</a><br /></td></tr>
<tr class="separator:ad559e0d0143cb9a666b605bb5c8ed0b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e1da334fce15e4acf759eb2f156e50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#a36e1da334fce15e4acf759eb2f156e50">vcan_connect</a> (<a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *bus, <a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a> *node)</td></tr>
<tr class="memdesc:a36e1da334fce15e4acf759eb2f156e50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches a new node to the bus, enabling it to receive any transmitted message.  <a href="vcan_8h.html#a36e1da334fce15e4acf759eb2f156e50">More...</a><br /></td></tr>
<tr class="separator:a36e1da334fce15e4acf759eb2f156e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e7d4dc469453a25634b3306545a7526"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#a2e7d4dc469453a25634b3306545a7526">vcan_disconnect</a> (<a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *bus, const <a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a> *node)</td></tr>
<tr class="memdesc:a2e7d4dc469453a25634b3306545a7526"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches a node from the bus, disabling it from receiving any further messages.  <a href="vcan_8h.html#a2e7d4dc469453a25634b3306545a7526">More...</a><br /></td></tr>
<tr class="separator:a2e7d4dc469453a25634b3306545a7526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa979ad71c6a546d1996d1a58dba1f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vcan_8h.html#a3aa979ad71c6a546d1996d1a58dba1f4">vcan_tx</a> (<a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *bus, const <a class="el" href="structvcan__msg__t.html">vcan_msg_t</a> *msg, const <a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a> *src_node)</td></tr>
<tr class="memdesc:a3aa979ad71c6a546d1996d1a58dba1f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a copy of the message to every connected node and calls every nodes's callback to notify them.  <a href="vcan_8h.html#a3aa979ad71c6a546d1996d1a58dba1f4">More...</a><br /></td></tr>
<tr class="separator:a3aa979ad71c6a546d1996d1a58dba1f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>VCAN is a tiny Virtual CAN and CAN-FD bus.</p>
<p>Especially useful for debugging and testing without using actual CAN-connected devices, VCAN is a tiny C library that allows the user to connect virtual nodes on a virtual bus and make them react whenever someone transmits a message on the bus.</p>
<p>After the transmission, each node obtains a copy of the message and a callback on each node is called to warn the node of a message being received.</p>
<p><b>Limitations</b></p>
<p>VCAN is simple, synchronous and not thread safe. It does not simulate transmission errors, collisions, arbitration, etc. just pure data transfer. Callbacks should be fast.</p>
<p>... but you are free to alter it to your specific needs!</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright © 2020, Matjaž Guštin <a href="#" onclick="location.href='mai'+'lto:'+'dev'+'@m'+'atj'+'az'+'.it'; return false;">dev@m<span style="display: none;">.nosp@m.</span>atja<span style="display: none;">.nosp@m.</span>z.it</a> <a href="https://matjaz.it">https://matjaz.it</a>. All rights reserved. <b>License:</b> BSD 3-clause license. </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="af85bcdc0f243aa23503829e24085ae5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85bcdc0f243aa23503829e24085ae5f">&#9670;&nbsp;</a></span>vcan_node_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structvcan__node.html">vcan_node</a> <a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Virtual node. </p>
<p>Contains a copy of the last received message and a callback function, which is called whenever a message is received. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af87bc0cb09ad0a7df2a44784afee21b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af87bc0cb09ad0a7df2a44784afee21b0">&#9670;&nbsp;</a></span>vcan_err_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>VCAN error codes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0a1755e318ade1090d8ba3e28facae7cdf"></a>VCAN_OK&#160;</td><td class="fielddoc"><p>Successfully completed. </p>
</td></tr>
<tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0a953804e5254c5caf6773412019acc948"></a>VCAN_NULL_BUS&#160;</td><td class="fielddoc"><p>The bus argument is NULL. </p>
</td></tr>
<tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0ad5a9001be8d447b4cc3429582041d159"></a>VCAN_NULL_MSG&#160;</td><td class="fielddoc"><p>The message argument is NULL. </p>
</td></tr>
<tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0a05807aa29d7bd5ba51cbecddf0a2f26c"></a>VCAN_NULL_NODE&#160;</td><td class="fielddoc"><p>The node argument is NULL. </p>
</td></tr>
<tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0a11920683d62df5617e40dd46524a0371"></a>VCAN_NULL_CALLBACK&#160;</td><td class="fielddoc"><p>The callback within the node is NULL. </p>
</td></tr>
<tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0a83ff0bbbf8be6890bc3394d519e62d2b"></a>VCAN_TOO_MANY_CONNECTED&#160;</td><td class="fielddoc"><p>Max amount of connected nodes reached. </p>
<p>Consider increasing <a class="el" href="vcan_8h.html#adf54a2e77853a0f4217d6bcd75ad902b" title="MAx amount of virtual nodes connected to the virtual bus.">VCAN_MAX_CONNECTED_NODES</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0af5319daa4b25064119d93ee1bcca539d"></a>VCAN_NODE_NOT_FOUND&#160;</td><td class="fielddoc"><p>This node is not connected to the bus, so it cannot be disconnected. </p>
</td></tr>
<tr><td class="fieldname"><a id="af87bc0cb09ad0a7df2a44784afee21b0ad9de5f55040e5502b215dc6904f29a73"></a>VCAN_ALREADY_CONNECTED&#160;</td><td class="fielddoc"><p>The node is already connected to the bus. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad559e0d0143cb9a666b605bb5c8ed0b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad559e0d0143cb9a666b605bb5c8ed0b5">&#9670;&nbsp;</a></span>vcan_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a> vcan_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>not NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a953804e5254c5caf6773412019acc948" title="The bus argument is NULL.">VCAN_NULL_BUS</a> on <code>bus</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a1755e318ade1090d8ba3e28facae7cdf" title="Successfully completed.">VCAN_OK</a> otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a36e1da334fce15e4acf759eb2f156e50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e1da334fce15e4acf759eb2f156e50">&#9670;&nbsp;</a></span>vcan_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a> vcan_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attaches a new node to the bus, enabling it to receive any transmitted message. </p>
<p>When someone transmits a message, the node will get a copy into <code>node-&gt;received_msg</code> and its callback will be called, passing the node itself as its only argument.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>not NULL </td></tr>
    <tr><td class="paramname">node</td><td>not NULL, with callback not NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a953804e5254c5caf6773412019acc948" title="The bus argument is NULL.">VCAN_NULL_BUS</a> on <code>bus</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a05807aa29d7bd5ba51cbecddf0a2f26c" title="The node argument is NULL.">VCAN_NULL_NODE</a> on <code>node</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a11920683d62df5617e40dd46524a0371" title="The callback within the node is NULL.">VCAN_NULL_CALLBACK</a> on <code>node-&gt;callback_on_rx</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a83ff0bbbf8be6890bc3394d519e62d2b" title="Max amount of connected nodes reached.">VCAN_TOO_MANY_CONNECTED</a> when there number of already connected nodes to the bus the maximum. Increase <a class="el" href="vcan_8h.html#adf54a2e77853a0f4217d6bcd75ad902b" title="MAx amount of virtual nodes connected to the virtual bus.">VCAN_MAX_CONNECTED_NODES</a> if required.</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0ad9de5f55040e5502b215dc6904f29a73" title="The node is already connected to the bus.">VCAN_ALREADY_CONNECTED</a> when the node is already connected to the bus, there is nothing to be done.</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a1755e318ade1090d8ba3e28facae7cdf" title="Successfully completed.">VCAN_OK</a> otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a2e7d4dc469453a25634b3306545a7526"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e7d4dc469453a25634b3306545a7526">&#9670;&nbsp;</a></span>vcan_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a> vcan_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detaches a node from the bus, disabling it from receiving any further messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>not NULL </td></tr>
    <tr><td class="paramname">node</td><td>not NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a953804e5254c5caf6773412019acc948" title="The bus argument is NULL.">VCAN_NULL_BUS</a> on <code>bus</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a05807aa29d7bd5ba51cbecddf0a2f26c" title="The node argument is NULL.">VCAN_NULL_NODE</a> on <code>node</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0af5319daa4b25064119d93ee1bcca539d" title="This node is not connected to the bus, so it cannot be disconnected.">VCAN_NODE_NOT_FOUND</a> the node was not connected to this bus, so there is nothing to do</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a1755e318ade1090d8ba3e28facae7cdf" title="Successfully completed.">VCAN_OK</a> otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a3aa979ad71c6a546d1996d1a58dba1f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aa979ad71c6a546d1996d1a58dba1f4">&#9670;&nbsp;</a></span>vcan_tx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0">vcan_err_t</a> vcan_tx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvcan__bus__t.html">vcan_bus_t</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvcan__msg__t.html">vcan_msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="vcan_8h.html#af85bcdc0f243aa23503829e24085ae5f">vcan_node_t</a> *&#160;</td>
          <td class="paramname"><em>src_node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a copy of the message to every connected node and calls every nodes's callback to notify them. </p>
<p>If you include a transmitting node, that one is excluded from the reception.</p>
<p>The callbacks must be fast in order to make this function perform quick enough. Before transmitting the next message, the user should take care that each virtual node has finished processing the message (e.g. copying to another location), so the next transmit does not overwrite the unprocessed message in the nodes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>not NULL </td></tr>
    <tr><td class="paramname">msg</td><td>not NULL </td></tr>
    <tr><td class="paramname">src_node</td><td>can be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a953804e5254c5caf6773412019acc948" title="The bus argument is NULL.">VCAN_NULL_BUS</a> on <code>bus</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0ad5a9001be8d447b4cc3429582041d159" title="The message argument is NULL.">VCAN_NULL_MSG</a> on <code>msg</code> being NULL</li>
<li><a class="el" href="vcan_8h.html#af87bc0cb09ad0a7df2a44784afee21b0a1755e318ade1090d8ba3e28facae7cdf" title="Successfully completed.">VCAN_OK</a> otherwise </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
